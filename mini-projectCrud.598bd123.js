function e(e){return e.map(e=>`
    <li class="post-card" data-id="${e.id}">
    <img class="photo-post" src="${e.imageUrl}" alt="photo" />
        <p class="user">${e.userName}</p>
        <div class="stats">
            <p id="like" class="stats-item">
                <button class="like-button"><i class="material-icons">thumb_up</i></button>
                <span class="likes-p">${e.likes}</span>
            </p>
            <p id="comment" class="stats-item">
                <button class="comment-button"><i class="material-icons">comment</i></button>
                ${e.comments}
            </p>
        </div>
        <button type="click" class="edit">Edit</button>
        <button type="click" class="delete">Delete</button>
    </li>
    `).join("")}async function t(){try{return await fetch("https://6882a21521fa24876a9b6374.mockapi.io/posts").then(e=>e.json())}catch(e){console.log(e)}}async function o(e){try{return await fetch("https://6882a21521fa24876a9b6374.mockapi.io/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json())}catch(e){console.log(e)}}async function s(e,t){try{return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json())}catch(e){if(!res.ok)throw Error("Failed to update post");return res.json()}}async function c(e){try{return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${e}`,{method:"DELETE"})}catch(e){console.log(e)}}async function n(e,t){try{return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({likes:e})}).then(e=>e.json())}catch(e){console.log(e)}}document.querySelector(".add").addEventListener("click",()=>{document.querySelector(".modal-backdrop").classList.remove("hidden")}),document.querySelector(".close-modal").addEventListener("click",()=>{document.querySelector(".modal-backdrop").classList.add("hidden")}),document.querySelector(".close-modalEdit").addEventListener("click",()=>{document.querySelector(".modal-backdropEdit").classList.add("hidden")}),t().then(t=>{console.log(t),document.querySelector(".posts").innerHTML=e(t)}),document.querySelector("#new-post-form").addEventListener("submit",s=>{s.preventDefault();let c=s.target.elements.url.value,n={userName:s.target.elements.Username.value,imageUrl:c,likes:0,comments:0};console.log(n),o(n).then(()=>{t().then(t=>{document.querySelector(".posts").innerHTML=e(t),document.querySelector(".modal-backdrop").classList.add("hidden")})}),s.target.elements.Username.value="",s.target.elements.url.value=""}),document.querySelector(".posts").addEventListener("click",e=>{if(e.target.closest(".like-button")){let t=e.target.closest(".like-button"),o=t.closest(".post-card"),s=o.dataset.id,c=o.querySelector(".likes-p"),a=Number(c.textContent);t.classList.contains(".liked")||(c.textContent=a+=1,t.classList.add(".liked"),n(a,s))}}),document.querySelector(".posts").addEventListener("click",o=>{o.target.closest(".delete")&&c(o.target.closest(".post-card").getAttribute("data-id")).then(()=>{t().then(t=>{console.log(t),document.querySelector(".posts").innerHTML=e(t)})})});let a=null;document.querySelector(".posts").addEventListener("click",e=>{if(e.target.closest(".edit")){let t=e.target.closest(".edit").closest(".post-card");a=t.dataset.id,document.querySelector("#username").value=t.querySelector(".user").textContent,document.querySelector("#url").value=t.querySelector(".photo-post").src,document.querySelector(".modal-backdropEdit").classList.remove("hidden")}}),console.log(a),document.querySelector(".edit-button").addEventListener("click",()=>{let o={userName:document.querySelector("#username").value,imageUrl:document.querySelector("#url").value};console.log(o),console.log(a),s(o,a).then(()=>t()).then(t=>{document.querySelector(".posts").innerHTML=e(t),document.querySelector(".modal-backdropEdit").classList.add("hidden")}).catch(e=>{console.error("Error updating post:",e)})});
//# sourceMappingURL=mini-projectCrud.598bd123.js.map
